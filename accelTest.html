<!--
   accelTest.html
   
   Author: Matthew Steinwachs   
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
	<meta name="viewport" content="user-scalable=no, width=device-width" />

	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.css" />

	<script type="text/javascript" src = "http://code.jquery.com/jquery-1.6.2.min.js"></script>
	<script type="text/javascript" src = "http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.js"></script>
 
	<script type="text/javascript">
		var xPos, yPos;
		$(document).ready(function(){
			window.addEventListener("devicemotion",onDeviceMotion,false);
			xPos = window.innerWidth/2-10;
			yPos = window.innerHeight/2-10;
		});
		
		
		$('#pointer').css('top', yPos+"px")
									 .css('left',xPos+"px");
									 
		function onDeviceMotion(event){
			var accel = event.accelerationIncludingGravity;
			xPos += accel.x*10;
			if (xPos < 0) xPos = 0;
			if (xPos > window.innerWidth-20) xPos = window.innerWidth - 20;
			
			yPos -= accel.y*10;
			if (yPos < 0) yPos = 0;
			if (yPos > window.innerHeight-20) yPos = window.innerHeight - 20;
			
			$('#pointer').css('top', yPos+"px")
									 .css('left',xPos+"px");
		}
	</script>
</head> 

<body>
	<div id="pointer" style="position: absolute; background: #ff0000; height:20px; width:20px;"></div>
</body>

</html>
