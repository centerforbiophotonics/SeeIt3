
<!DOCTYPE html>
<html>

<head>
	<title>Test</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="generator" content="Geany 0.20" />
	
	<script type="text/javascript" language="javascript" src="DataTables-1.8.2/media/js/jquery.js"></script>
	<script type="text/javascript" language="javascript" src="DataTables-1.8.2/examples/examples_support/jquery.jeditable.js"></script>
	<script type="text/javascript" language="javascript" src="DataTables-1.8.2/media/js/jquery.dataTables.js"></script>
	<style type="text/css" title="currentStyle">
			@import "DataTables-1.8.2/media/css/demo_page.css";
			@import "DataTables-1.8.2/media/css/demo_table.css";
	</style>
	<script type="text/javascript" charset="utf-8">
		
		var numRows = 31; 
		var rows = [
					[ "Alabama", 23, 45, 15, 9],
					[ "Arkansas", 23, 45, 15, 9],
					[ "California", 23, 45, 15, 9],
					[ "Florida", 23, 45, 15, 9],
					[ "Colorado", 23, 45, 15, 9],
					[ "New York", 23, 45, 15, 9],
					[ "Montana", 23, 45, 15, 9],
					[ "Utah", 23, 45, 15, 9],
					[ "Nevada", 23, 45, 15, 9],
					[ "Idaho", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
					[ "Oregon", 23, 45, 15, 9],
				]
		var numCols = 5;
				
		var cols = [
					{ "sTitle": "State" },
					{ "sTitle": "White Male Lung Cancer" },
					{ "sTitle": "White Female Lung Cancer" },
					{ "sTitle": "Black Male Lung Cancer" },
					{ "sTitle": "Black Male Lung Cancer" },
					//{ "sTitle": "*New Column*" }
				]
				
		var oTable;
		
		function createTable(){
			$('#demo').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="example"></table>' );
			oTable = $('#example').dataTable( {
				"bPaginate": false,
        //"bLengthChange": false,
        //"bFilter": true,
        "bSort": false,
        "bInfo": false,
        "bAutoWidth": false,
				
				"aaData": rows,
				"aoColumns": cols,
			});
			
			/* Apply the jEditable handlers to the table */
			$('td', oTable.fnGetNodes()).editable( function(value, settings) { 
					 //console.log(this);
					 console.log(value);
					 //console.log(settings);
					 return(value);
			}, {
					"callback": function( sValue, y ) {
							var aPos = oTable.fnGetPosition( this );
							oTable.fnUpdate( sValue, aPos[0], aPos[1] );
							rows[aPos[0]][aPos[1]] = sValue;
							console.log(aPos[0]+" . . . "+aPos[1])
					},
					"submitdata": function ( value, settings ) {
							return {
									"row_id": this.parentNode.getAttribute('id'),
									"column": oTable.fnGetPosition( this )[2]
							};
					},
					"height": "14px",
			});
			
			$('th').editable( function(value, settings) { 
					 //console.log(this);
					 console.log(value);
					 //console.log(settings);
					 return(value);
			}, {
					"callback": function( sValue, y ) {
							//var aPos = oTable.fnGetPosition( this );
							//oTable.fnUpdate( sValue, aPos[0], aPos[1] );
					},
					"submitdata": function ( value, settings ) {
							return {
									//"row_id": this.parentNode.getAttribute('id'),
									//"column": oTable.fnGetPosition( this )[2]
							};
					},
					"height": "14px",
			});
			
			$('#example th').attr('nowrap', 'nowrap');
		}
		
		$(document).ready(function() {
			createTable();
			
			$('#newCol').click(function(){
				//console.log("newCol");
				oTable.dataTable().fnDestroy();
				cols.push({"sTitle":"DefaultTitle"+numCols++});
				rows.forEach(function(r){
					r.push("");
				});
				createTable();
				$('body').scrollLeft(100000);
			});
			
			$('#newRow').click(function(){
				var newRow = ["DefaultLabel"+numRows++];
				for (var i=1; i<numCols; i++)
					newRow.push("");
				rows.push(newRow);
				oTable.dataTable().fnDestroy();
				createTable();
				$('body').scrollTop(100000);
			});
		});
		
		
	</script>
</head>

<body>
	<table>
		<tr>
			<td><div id="demo"></div></td>
			<td valign="top"><br><input id="newCol" type="button" value="Add Column"></td>
		</tr>
		<tr>
			<td><input id="newRow" type="button" value="Add Row"></td>
		</tr>
	</table>
	
</body>

</html>
